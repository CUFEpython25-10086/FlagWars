# FlagWars 使用说明

## 游戏简介

FlagWars 是一款现代化的*夺旗*游戏。在这个游戏中，每个玩家都有一个基地。游戏的目标是占领对手的基地，成为最后一个拥有基地的玩家。

## 快速开始

### 方法一：使用启动脚本（推荐）

1. 双击运行 `start_server.bat`
2. 脚本会自动安装 uv 和 Python 环境
3. 自动安装游戏依赖
4. 启动游戏服务器
5. 打开浏览器访问 http://localhost:8888

### 方法二：手动启动

1. 确保已安装 uv（Python包管理器）
2. 在项目目录下运行：
   ```bash
   uv sync
   uv run python run_server.py
   ```
3. 打开浏览器访问 http://localhost:8888

## 游戏玩法

### 基本操作

1. **加入游戏**：输入玩家名称和颜色，点击"加入游戏"
2. **选择士兵**：点击自己的地块选中士兵
3. **移动士兵**：
   - 使用方向键（↑↓←→）或 WASD 键移动
   - 点击移动按钮
   - 直接点击目标地块

### 地形类型

| 地形 | 说明 | 士兵生成 | 可通行 | 可占领 |
|------|------|----------|--------|--------|
| 平原 | 基本地形 | 每15游戏刻生成1个 | 是 | 是 |
| 基地 | 玩家家园 | 每游戏刻生成1个 | 是 | 是（需要10士兵） |
| 塔楼 | 战略要地 | 每游戏刻生成1个 | 是 | 是（需要5士兵） |
| 城墙 | 防御工事 | 不生成 | 否 | 是（需要3士兵） |
| 山脉 | 自然障碍 | 不生成 | 否 | 否 |
| 沼泽 | 危险地形 | 不生成 | 是 | 是（每刻减少1士兵） |

### 游戏规则

1. **士兵生成**：不同地形有不同的士兵生成速度
2. **占领机制**：士兵数量超过对方即可占领地块
3. **基地占领**：占领敌方基地即可淘汰该玩家
4. **胜利条件**：成为最后一个拥有基地的玩家

## 技术架构

- **服务端**：Python + Tornado（WebSocket通信）
- **客户端**：HTML5 Canvas + Brython（Python in Browser）
- **包管理**：uv（现代Python包管理器）

## 开发说明

### 项目结构

```
FlagWars/
├── src/flagwars/          # Python源代码
│   ├── __init__.py        # 包初始化
│   ├── models.py          # 游戏数据模型
│   ├── server.py          # Tornado服务器
│   └── templates/         # HTML模板
│       └── index.html     # 游戏客户端页面
├── pyproject.toml         # 项目配置和依赖
├── run_server.py          # 服务器启动脚本
├── start_server.bat       # Windows启动脚本
└── README_ch.md           # 项目说明
```

### 扩展开发

要添加新功能，可以修改以下文件：

- `src/flagwars/models.py`：游戏逻辑和规则
- `src/flagwars/server.py`：服务器通信逻辑
- `src/flagwars/templates/index.html`：客户端界面和交互

## 故障排除

### 常见问题

1. **端口占用**：如果8888端口被占用，修改 `server.py` 中的端口号
2. **依赖安装失败**：确保网络连接正常，或手动运行 `uv sync`
3. **浏览器兼容性**：建议使用Chrome、Firefox或Edge浏览器

### 日志查看

服务器启动后会显示日志信息，包括：
- 连接状态
- 游戏事件
- 错误信息

## 联系方式

如有问题或建议，请参考项目文档或联系开发团队。

---

**愿旗帜与你同在！** 🚩